<script>
  import Modul from "./Modul.svelte";
  import Semester from "./Semester.svelte";

  export let all;

  /*  let all = [
    {
      number: "1",
      semesterModules: [
        {
          group: "Informatik",
          color: "#002c57",
          modules: [{ name: "Software Engineering 1", credits: 6 }],
        },
        {
          group: "Wirtschaft",
          color: "#009bac",
          modules: [
            { name: "Einführung BWL", credits: 6 },
            { name: "Wissenschaftliches Schreiben", credits: 6 },
            { name: "Accounting", credits: 6 },
          ],
        },
        {
          group: "Sonstige",
          color: "#67c0b5",
          modules: [
            { name: "Mathematik", credits: 6 },
            { name: "VWL 1", credits: 6 },
            { name: "English C1", credits: 6 },
          ],
        },
      ],
    },
    {
      number: "2",
      semesterModules: [
        {
          group: "Informatik",
          color: "#002c57",
          modules: [{ name: "Requirements Engineering", credits: 6 }],
        },
        {
          group: "Wirtschaft",
          color: "#009bac",
          modules: [
            { name: "Prozessmodellierung", credits: 6 },
            { name: "Strategisches Management", credits: 6 },
            { name: "Marketing", credits: 6 },
          ],
        },
        {
          group: "Sonstige",
          color: "#67c0b5",
          modules: [
            { name: "Wahlpflichtmodul", credits: 6 },
            { name: "Business Intelligence", credits: 6 },
          ],
        },
      ],
    },
  ]; */

  function calculateTotalCredits(semester) {
    let totalCredits = 0;
    semester.semesterModules.forEach((group) => {
      group.modules.forEach((module) => {
        totalCredits += module.credits;
      });
    });
    return totalCredits;
  }
</script>

<div class="row">
  <div class="col">
    <h1 class="mainTitle">
      Modultafel Bachelorstudiengang Wirtschaftsinformatik
    </h1>
  </div>
  <div class="col-3" id="zhawSML">
    <img
      src="https://filestore.sml.zhaw.ch/modultafeln/bachelor/logo_zhaw_sml_sw.jpg"
      alt="Logo SML"
      width="60%"
    />
  </div>
</div>

<h4 class="InfoText">
  Klicken Sie auf die farbigen Kästchen um die Modulbeschreibungen anzusehen.
</h4>
<h4 class="InfoTextRot">Das ist ein Warntext</h4>

<div class="custom-container">
  {#each all as semester}
  <div class="row">
    <!-- col-md-auto statt col-sm / auto, damit die Semester nicht so breit sind-->
    <div class="col-md-auto">
      <Semester
        semesterNumber="{semester.number}"
        totalCredits="{calculateTotalCredits(semester)}"
      />
    </div>

    {#each semester.semesterModules as group}
    <!-- col-md statt col-sm -->
    <div class="col-md" style="--groupBG: {group.color}80">
      <!--80 stands for the opacity of the background color-->
      <div class="row">
        {#each group.modules as module}
        <!-- col-xl-6 statt col-sm-6 -->
        <div class="col-xl-6">
          <Modul
            color="{group.color}"
            name="{module.name}"
            gruppe="{group.group}"
            badge="{module.credits}"
          />
        </div>
        {/each}
      </div>
    </div>
    {/each}
  </div>
  {/each}
</div>

<style>
  html,
  body {
    position: relative;
    width: 100%;
    height: 100%;
  }

  body {
    color: #333;
    margin: 0;
    padding: 8px;
    box-sizing: border-box;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
  }

  a {
    color: rgb(0, 100, 200);
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
  }

  a:visited {
    color: rgb(0, 80, 160);
  }

  label {
    display: block;
  }

  input,
  button,
  select,
  textarea {
    font-family: inherit;
    font-size: inherit;
    -webkit-padding: 0.4em 0;
    padding: 0.4em;
    margin: 0 0 0.5em 0;
    box-sizing: border-box;
    border: 1px solid #ccc;
    border-radius: 2px;
  }

  input:disabled {
    color: #ccc;
  }

  button {
    color: #333;
    background-color: #f4f4f4;
    outline: none;
  }

  button:disabled {
    color: #999;
  }

  button:not(:disabled):active {
    background-color: #ddd;
  }

  button:focus {
    border-color: #666;
  }

  .card {
    display: flex;
    flex-direction: column;
    align-items: left;

    border-radius: 8px;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background: #fff;

    /* 2dp — Elevation */
    box-shadow: 0px 1px 5px 0px rgba(0, 0, 0, 0.2),
      0px 3px 4px 0px rgba(0, 0, 0, 0.12), 0px 2px 4px 0px rgba(0, 0, 0, 0.14);

    border-radius: 8px;
    background: #fff;

    /* 2dp — Elevation */
    box-shadow: 0px 1px 5px 0px rgba(0, 0, 0, 0.2),
      0px 3px 4px 0px rgba(0, 0, 0, 0.12), 0px 2px 4px 0px rgba(0, 0, 0, 0.14);
  }

  .cardM {
    display: flex;
    flex-direction: column;
    align-items: left;

    border-radius: 8px;
    background: #fff;

    /* 2dp — Elevation */
    box-shadow: 0px 1px 5px 0px rgba(0, 0, 0, 0.2),
      0px 3px 4px 0px rgba(0, 0, 0, 0.12), 0px 2px 4px 0px rgba(0, 0, 0, 0.14);

    border-radius: 8px;
    background: #fff;

    /* 2dp — Elevation */
    box-shadow: 0px 1px 5px 0px rgba(0, 0, 0, 0.2),
      0px 3px 4px 0px rgba(0, 0, 0, 0.12), 0px 2px 4px 0px rgba(0, 0, 0, 0.14);

    padding: 5%;
  }

  .Modulgruppe {
    color: #00a6df;

    /* Overline / Roboto Medium */
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    font-size: 10px;
    font-style: normal;
    font-weight: 500;
    line-height: 16px; /* 160% */
    letter-spacing: 1.5px;
    text-transform: uppercase;
  }

  .badge {
    display: flex;
    padding: 0px 7px;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    border-radius: 4px;
    background: var(--badgeBG);
  }

  .badgeTotal {
    padding: 0px 7px;
    flex-direction: column;
    align-items: left;
    border-radius: 4px;
    background: #0064a6;
    color: whitesmoke;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    font-weight: bold;
    font-size: smaller;
  }

  .InfoTextRot {
    color: #f00;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    font-size: 32px;
    font-style: normal;
    font-weight: 500;
    line-height: normal;
  }

  .InfoText {
    color: #0064a6;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    font-size: 32px;
    font-style: normal;
    font-weight: 500;
    line-height: normal;
  }

  .col-sm,
  .col-md,
  .col-lg,
  .col-xl {
    background-color: var(--groupBG);
  }

  .mainTitle {
    color: #0064a6;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    font-size: 40px;
    font-style: normal;
    font-weight: 700;
    line-height: normal;
  }

  .custom-container {
    max-width: 97%; /* Hier kannst du die gewünschte Breite in Pixeln oder einem anderen Wert festlegen */
    margin: 0 auto; /* Dies zentriert den Container auf der Seite */
  }
  /* Füge CSS-Stile für die Module hinzu */
  .module {
    padding: 20px; /* Innenabstand für die Module */
    border: 1px solid #ccc; /* Rahmen um die Module */
    text-align: center;
  }

  #zhawSML {
    align-items: left;
  }
</style>
